# æ­£ç¢ºçš„ä¸‰å±¤æ¶æ§‹ç·¨æ’ç³»çµ±è¨­è¨ˆ

## ğŸ—ï¸ ä¸‰å±¤æ¶æ§‹æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ProductOrchestrator (ç”¢å“ç´š)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ SmartUI ç”¢å“éœ€æ±‚åˆ†æ                                        â”‚ â”‚
â”‚  â”‚ â€¢ å·¥ä½œæµåºåˆ—è¦åŠƒ                                              â”‚ â”‚
â”‚  â”‚ â€¢ ç”¢å“ç´šæ±ºç­–å’Œå”èª¿                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ é€é HTTP API èª¿ç”¨
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WorkflowOrchestrator (å·¥ä½œæµç´š)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ å·¥ä½œæµæ¨¡æ¿ç®¡ç†                                              â”‚ â”‚
â”‚  â”‚ â€¢ éšæ®µä¾è³´é—œä¿‚è™•ç†                                            â”‚ â”‚
â”‚  â”‚ â€¢ å·¥ä½œæµåŸ·è¡Œç‹€æ…‹ç®¡ç†                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ é€é HTTP API èª¿ç”¨
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MCPCoordinator (å”èª¿ç´š)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ MCP çµ„ä»¶è¨»å†Šå’Œç™¼ç¾                                          â”‚ â”‚
â”‚  â”‚ â€¢ è² è¼‰å‡è¡¡å’Œè·¯ç”±                                              â”‚ â”‚
â”‚  â”‚ â€¢ å¥åº·æª¢æŸ¥å’ŒéŒ¯èª¤è™•ç†                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ é€é MCP å”è­°èª¿ç”¨
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å…­å¤§ Workflow MCP (å·¥ä½œæµçµ„ä»¶)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ requirements_   â”‚ â”‚ architecture_   â”‚ â”‚ coding_workflow â”‚   â”‚
â”‚  â”‚ analysis_mcp    â”‚ â”‚ design_mcp      â”‚ â”‚ _mcp            â”‚   â”‚
â”‚  â”‚ (8090)          â”‚ â”‚ (8091)          â”‚ â”‚ (8092)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ developer_flow  â”‚ â”‚ release_manager â”‚ â”‚ operations_     â”‚   â”‚
â”‚  â”‚ _mcp (8093)     â”‚ â”‚ _mcp (8094)     â”‚ â”‚ workflow_mcp    â”‚   â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚ (8095)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ é¸æ“‡åˆé©çš„ MCP çµ„ä»¶
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCP çµ„ä»¶ (é©é…å™¨ç´š)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ advanced_smartuiâ”‚ â”‚ kilocode_mcp    â”‚ â”‚ github_mcp      â”‚   â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ test_manage_mcp â”‚ â”‚ deployment_mcp  â”‚ â”‚ monitoring_mcp  â”‚   â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ­£ç¢ºçš„èª¿ç”¨æµç¨‹

### SmartUI é–‹ç™¼è«‹æ±‚æµç¨‹

1. **ProductOrchestrator æ¥æ”¶è«‹æ±‚**
   ```python
   smartui_request = SmartUIProductRequest(
       ui_type="advanced",
       features=["voice_control", "dynamic_layout"],
       integration_mode="seamless"
   )
   ```

2. **ProductOrchestrator â†’ WorkflowOrchestrator**
   ```python
   # ProductOrchestrator èª¿ç”¨ WorkflowOrchestrator
   workflow_request = {
       "workflow_type": "smartui_development",
       "stages": [
           {"stage_id": "smartui_requirements", "workflow": "requirements_analysis_mcp"},
           {"stage_id": "smartui_architecture", "workflow": "architecture_design_mcp"},
           {"stage_id": "smartui_coding", "workflow": "coding_workflow_mcp"},
           {"stage_id": "smartui_testing", "workflow": "developer_flow_mcp"},
           {"stage_id": "smartui_deployment", "workflow": "release_manager_mcp"},
           {"stage_id": "smartui_monitoring", "workflow": "operations_workflow_mcp"}
       ]
   }
   
   response = requests.post(
       "http://localhost:8089/api/workflow/execute",
       json=workflow_request
   )
   ```

3. **WorkflowOrchestrator â†’ MCPCoordinator**
   ```python
   # WorkflowOrchestrator èª¿ç”¨ MCPCoordinator
   for stage in workflow_stages:
       mcp_request = {
           "target_workflow": stage["workflow"],
           "stage_data": stage["data"],
           "context": workflow_context
       }
       
       response = requests.post(
           "http://localhost:8089/api/mcp/coordinate",
           json=mcp_request
       )
   ```

4. **MCPCoordinator â†’ å…­å¤§ Workflow MCP**
   ```python
   # MCPCoordinator è·¯ç”±åˆ°å°æ‡‰çš„ Workflow MCP
   if target_workflow == "requirements_analysis_mcp":
       response = requests.post(
           "http://localhost:8090/api/execute",
           json=stage_data
       )
   elif target_workflow == "coding_workflow_mcp":
       response = requests.post(
           "http://localhost:8092/api/execute", 
           json=stage_data
       )
   ```

5. **å…­å¤§ Workflow MCP â†’ é¸æ“‡åˆé©çš„ MCP çµ„ä»¶**
   ```python
   # coding_workflow_mcp é¸æ“‡åˆé©çš„çµ„ä»¶
   if request_type == "smartui_development":
       # é¸æ“‡ advanced_smartui å’Œ kilocode_mcp
       components = ["advanced_smartui", "kilocode_mcp"]
       
       for component in components:
           component_response = await call_mcp_component(component, task_data)
   ```

## ğŸ“‹ å„å±¤ç´šçš„è·è²¬åˆ†å·¥

### ProductOrchestrator (ç”¢å“ç´š)
- **è·è²¬**: ç”¢å“éœ€æ±‚åˆ†æã€å·¥ä½œæµåºåˆ—è¦åŠƒã€ç”¢å“ç´šæ±ºç­–
- **ä¸ç›´æ¥èª¿ç”¨**: MCP çµ„ä»¶ã€å…­å¤§ Workflow MCP
- **åªèª¿ç”¨**: WorkflowOrchestrator

### WorkflowOrchestrator (å·¥ä½œæµç´š)  
- **è·è²¬**: å·¥ä½œæµæ¨¡æ¿ç®¡ç†ã€éšæ®µä¾è³´è™•ç†ã€åŸ·è¡Œç‹€æ…‹ç®¡ç†
- **ä¸ç›´æ¥èª¿ç”¨**: MCP çµ„ä»¶ã€å…­å¤§ Workflow MCP
- **åªèª¿ç”¨**: MCPCoordinator

### MCPCoordinator (å”èª¿ç´š)
- **è·è²¬**: MCP çµ„ä»¶è¨»å†Šã€è² è¼‰å‡è¡¡ã€å¥åº·æª¢æŸ¥
- **ç›´æ¥èª¿ç”¨**: å…­å¤§ Workflow MCP
- **ä¸ç›´æ¥èª¿ç”¨**: MCP çµ„ä»¶

### å…­å¤§ Workflow MCP (å·¥ä½œæµçµ„ä»¶)
- **è·è²¬**: å…·é«”å·¥ä½œæµé‚è¼¯ã€é¸æ“‡åˆé©çš„ MCP çµ„ä»¶
- **ç›´æ¥èª¿ç”¨**: MCP çµ„ä»¶ (advanced_smartui, kilocode_mcp ç­‰)

### MCP çµ„ä»¶ (é©é…å™¨ç´š)
- **è·è²¬**: å…·é«”åŠŸèƒ½å¯¦ç¾ (UI ç”Ÿæˆã€ä»£ç¢¼ç”Ÿæˆã€æ¸¬è©¦ç­‰)
- **è¢«èª¿ç”¨**: ç”±å…­å¤§ Workflow MCP èª¿ç”¨

## ğŸš« éŒ¯èª¤çš„èª¿ç”¨æ–¹å¼

âŒ **ProductOrchestrator ç›´æ¥èª¿ç”¨ MCP çµ„ä»¶**
```python
# éŒ¯èª¤ï¼šè·³éäº†ä¸­é–“å±¤
response = requests.post("http://localhost:8098/api/execute", json=data)
```

âŒ **ProductOrchestrator ç›´æ¥èª¿ç”¨å…­å¤§ Workflow MCP**
```python
# éŒ¯èª¤ï¼šè·³éäº† WorkflowOrchestrator å’Œ MCPCoordinator
response = requests.post("http://localhost:8090/api/execute", json=data)
```

âŒ **WorkflowOrchestrator ç›´æ¥èª¿ç”¨ MCP çµ„ä»¶**
```python
# éŒ¯èª¤ï¼šè·³éäº† MCPCoordinator å’Œ Workflow MCP
response = requests.post("http://localhost:8098/api/execute", json=data)
```

## âœ… æ­£ç¢ºçš„èª¿ç”¨æ–¹å¼

âœ… **åš´æ ¼éµå¾ªä¸‰å±¤æ¶æ§‹**
```
ProductOrchestrator 
    â†’ WorkflowOrchestrator 
        â†’ MCPCoordinator 
            â†’ å…­å¤§ Workflow MCP 
                â†’ MCP çµ„ä»¶
```

## ğŸ”§ å¯¦æ–½è¦é»

1. **æ¯ä¸€å±¤åªèƒ½èª¿ç”¨ä¸‹ä¸€å±¤**ï¼Œä¸èƒ½è·³ç´š
2. **æ¯ä¸€å±¤éƒ½æœ‰æ˜ç¢ºçš„è·è²¬é‚Šç•Œ**
3. **é€šéæ¨™æº–åŒ–çš„ API æ¥å£é€šä¿¡**
4. **éŒ¯èª¤è™•ç†å’Œç‹€æ…‹å›å‚³é€å±¤å‘ä¸Š**
5. **é…ç½®å’Œç­–ç•¥ç”±ä¸Šå±¤å‘ä¸‹å±¤å‚³é**

é€™æ¨£çš„æ¶æ§‹ç¢ºä¿äº†ï¼š
- **æ¸…æ™°çš„è·è²¬åˆ†é›¢**
- **è‰¯å¥½çš„å¯ç¶­è­·æ€§**
- **æ¨™æº–åŒ–çš„é€šä¿¡å”è­°**
- **éˆæ´»çš„çµ„ä»¶æ›¿æ›èƒ½åŠ›**

